"use strict";(self["webpackChunkbudget"]=self["webpackChunkbudget"]||[]).push([[43],{3499:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var l=n(3396),r=n(7139);const c={class:"handler statistic"},i=(0,l._)("div",{class:"handler__header"},[(0,l._)("div",{class:"title"},"Баланс по Счетам")],-1),s={class:"handler__content"},a={class:"list-header"},u={key:0},o=(0,l._)("th",null,"№",-1),d=(0,l._)("th",null,"Название",-1),m=(0,l._)("th",null,"Валюта",-1),y=(0,l._)("th",null,"Нач. баланс",-1),h=(0,l._)("th",null,"Доход",-1),_=(0,l._)("th",null,"Расход",-1),g=(0,l._)("th",null,"Сумма",-1),C={key:1,class:"empty-list"},v=(0,l._)("div",{class:"main"},null,-1);function b(e,t,n,b,p,w){const f=(0,l.up)("main-currency-handler");return(0,l.wg)(),(0,l.iD)("div",c,[i,(0,l._)("div",s,[(0,l._)("div",a,[w.isEmptyList?((0,l.wg)(),(0,l.iD)("div",C,"Данных пока нет")):((0,l.wg)(),(0,l.iD)("table",u,[(0,l._)("thead",null,[(0,l._)("tr",null,[o,d,m,y,h,_,g,(0,l._)("th",null,"Сумма в "+(0,r.zw)(p.mainCurrencySymbol),1)])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(w.statisticList,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,(0,r.zw)(e.id),1),(0,l._)("td",null,(0,r.zw)(e.name),1),(0,l._)("td",null,(0,r.zw)(e.currency),1),(0,l._)("td",null,(0,r.zw)(e.startBalance),1),(0,l._)("td",null,(0,r.zw)(e.income),1),(0,l._)("td",null,(0,r.zw)(e.outcome),1),(0,l._)("td",null,(0,r.zw)(e.total),1),(0,l._)("td",null,(0,r.zw)(e.inUsd),1)])))),128))])]))]),(0,l.Wm)(f,{onChangeCurrency:w.changeMainCurrency},null,8,["onChangeCurrency"]),v])])}var p=n(65),w=n(9242),f=n.p+"img/triangle.54ae7c3c.svg";const S=e=>((0,l.dD)("data-v-c29272b8"),e=e(),(0,l.Cn)(),e),A={class:"main-currency"},D={class:"main-currency__title"},z={class:"row"},B=S((()=>(0,l._)("div",{class:"label"},[(0,l._)("label",null,"Выберете валюту"),(0,l._)("span",{class:"error show"})],-1))),k=["value"],H=S((()=>(0,l._)("button",{type:"submit",class:"row btn"}," ПОДТВЕРДИТЬ ",-1)));function U(e,t,n,c,i,s){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",A,[(0,l._)("div",D,"В качестве основной валюты выбран "+(0,r.zw)(i.mainCurrency.symbol),1),(0,l._)("div",{class:"main-currency__btn",onClick:t[0]||(t[0]=e=>i.formActive=!i.formActive)},[(0,l._)("span",null,(0,r.zw)(s.buttonText),1),(0,l._)("img",{class:(0,r.C_)({active:i.formActive}),src:f,alt:""},null,2)])]),(0,l._)("form",{onSubmit:t[2]||(t[2]=(0,w.iM)(((...e)=>s.formHandler&&s.formHandler(...e)),["prevent"])),class:(0,r.C_)({done:!i.formActive})},[(0,l._)("div",z,[B,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedOption=e)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.getAllCurrencies,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e},(0,r.zw)(e.title),9,k)))),128))],512),[[w.bM,i.selectedOption]])]),H],34)])}var L={name:"MainCurrencyHandler",computed:{...(0,p.Se)(["getAllCurrencies"]),buttonText(){return this.formActive?"Скрыть":"Изменить"}},data(){return{mainCurrency:{symbol:"USD"},selectedOption:{},formActive:!1}},methods:{...(0,p.nv)(["putCurrencyById"]),formHandler(){this.mainCurrency=this.selectedOption,this.$emit("changeCurrency",this.mainCurrency.symbol),this.formActive=!1}}},M=n(89);const O=(0,M.Z)(L,[["render",U],["__scopeId","data-v-c29272b8"]]);var E=O,I={components:{MainCurrencyHandler:E},name:"StatisticsView",computed:{...(0,p.Se)(["getAllRecords","getAllBills","getAllCurrencies","getCurrencyBySymbol"]),statisticList(){const e=this.getAllBills,t=[];return e.forEach((e=>t.push(this.countOneBill(e)))),t},isEmptyList(){return 0===this.statisticList.length},selectedCurrencyPrice(){if("USD"==this.mainCurrencySymbol)return 1;{const e=this.getCurrencyBySymbol(this.mainCurrencySymbol);return e.price?e.price:1}}},data(){return{mainCurrencySymbol:"USD"}},methods:{...(0,p.nv)(["getBillsData","getRecordsData","getCurrencyData","toggleLoader"]),countOneBill(e){const t={id:e.id,name:e.name,currency:e.currency,startBalance:e.startBalance,income:0,outcome:0,total:0,inUsd:0},n=this.getAllRecords;return n.forEach((e=>{e.bill==t.name&&("Доход"==e.type?t.income+=+e.sum:t.outcome+=+e.sum)})),t.total=+t.startBalance+t.income-t.outcome,t.inUsd=this.countInSelectedCurrency(t.currency,t.total,this.selectedCurrencyPrice),t},countInSelectedCurrency(e,t=0,n=1){const l=this.getAllCurrencies,r=l.filter((t=>t.symbol==e));if(r.length>0){const e=r[0].price;return(t/e*n).toFixed(2)}return 0},changeMainCurrency(e){this.mainCurrencySymbol=e}}};const x=(0,M.Z)(I,[["render",b]]);var R=x}}]);
//# sourceMappingURL=43.51af0c11.js.map