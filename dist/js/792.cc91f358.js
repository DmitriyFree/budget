"use strict";(self["webpackChunkbudget"]=self["webpackChunkbudget"]||[]).push([[792],{7792:function(e,t,a){a.r(t),a.d(t,{default:function(){return ge}});var r=a(3396);const i={class:"handler"},n={class:"handler__header"},o=(0,r._)("div",{class:"title"},"Категории",-1),d={class:"handler__content"},s={class:"handler__content-form"};function l(e,t,a,l,c,m){const u=(0,r.up)("app-create-button"),p=(0,r.up)("category-create-form"),h=(0,r.up)("app-modal"),y=(0,r.up)("category-list");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",n,[o,(0,r.Wm)(u,{class:"btn",onClickButton:m.showCreateModal},null,8,["onClickButton"])]),(0,r._)("div",d,[(0,r._)("div",s,[(0,r.Wm)(h,{"modal-active":c.activeCreateModal,onHideModal:m.hideCreateModal},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onHideForm:m.hideCreateModal},null,8,["onHideForm"])])),_:1},8,["modal-active","onHideModal"])]),(0,r.Wm)(y)])])}const c={class:"list-header"},m={key:0},u={class:"cate"},p=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"№"),(0,r._)("th",null,"Название"),(0,r._)("th",null,"Тип"),(0,r._)("th",{class:"dd"},"Действие")])],-1),h={key:1,class:"empty-list"};function y(e,t,a,i,n,o){const d=(0,r.up)("category-list-item"),s=(0,r.up)("app-pagination"),l=(0,r.up)("category-edit-form"),y=(0,r.up)("app-modal"),g=(0,r.up)("app-confirm-modal");return(0,r.wg)(),(0,r.iD)("div",c,[o.isEmptyList?((0,r.wg)(),(0,r.iD)("div",h,"Список категорий пуст")):((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("table",u,[p,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.pageItems,(e=>((0,r.wg)(),(0,r.j4)(d,{key:e.id,category:e,onEdit:o.editHandler,onDelete:o.deleteHandler},null,8,["category","onEdit","onDelete"])))),128))])]),(0,r.Wm)(s,{"pages-amount":e.pageCount,page:e.page,onCurrentPage:o.updateList},null,8,["pages-amount","page","onCurrentPage"])])),(0,r.Wm)(y,{"modal-active":n.activeEditForm,onHideModal:o.hideEditForm},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{category:n.target,onHideForm:o.hideEditForm},null,8,["category","onHideForm"])])),_:1},8,["modal-active","onHideModal"]),(0,r.Wm)(g,{show:n.activeConfirmForm,onResult:o.deleteCategory},null,8,["show","onResult"])])}var g=a(65),v=a(4268),_=a(7139);const C={class:"action"},w={class:"td-btn"};function E(e,t,a,i,n,o){const d=(0,r.up)("app-edit-button"),s=(0,r.up)("app-delete-button");return(0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",null,(0,_.zw)(a.category.id),1),(0,r._)("td",null,(0,_.zw)(a.category.name),1),(0,r._)("td",null,(0,_.zw)(a.category.type),1),(0,r._)("td",C,[(0,r._)("div",w,[(0,r.Wm)(d,{class:"edit__btn",onClickButton:o.edit},null,8,["onClickButton"]),(0,r.Wm)(s,{class:"remove__btn",onClickButton:o.confirm},null,8,["onClickButton"])])])])}var f={name:"CategoryListItem",props:{category:{type:Object,required:!0}},computed:{...(0,g.Se)(["getConfirmResult"])},methods:{...(0,g.OI)(["changePopupForm","setSelectedCategory","setConfirmModalText"]),edit(){this.$emit("edit",{...this.category})},async confirm(){this.$emit("delete",{...this.category})}}},b=a(89);const F=(0,b.Z)(f,[["render",E]]);var $=F,H=a(9242);const M={class:"edit-form"},k={class:"row"},D={class:"label"},I=(0,r._)("label",null,"Название",-1),L={class:"error"},B={class:"row"},W={class:"label"},q=(0,r._)("label",null,"Тип",-1),x={class:"error"},P=(0,r._)("option",null,"Доход",-1),Z=(0,r._)("option",null,"Расход",-1),z=[P,Z],A=(0,r._)("button",{type:"submit",class:"row btn"}," Изменить ",-1);function S(e,t,a,i,n,o){return(0,r.wg)(),(0,r.iD)("div",M,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,H.iM)(((...e)=>o.formHandler&&o.formHandler(...e)),["prevent"]))},[(0,r._)("div",k,[(0,r._)("div",D,[I,(0,r._)("span",L,(0,_.zw)(e.nameError),1)]),(0,r.wy)((0,r._)("input",{required:"",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.candidate.name=e),onInput:t[1]||(t[1]=(...t)=>e.resetNameError&&e.resetNameError(...t))},null,544),[[H.nr,n.candidate.name]])]),(0,r._)("div",B,[(0,r._)("div",W,[q,(0,r._)("span",x,(0,_.zw)(e.typeError),1)]),(0,r.wy)((0,r._)("select",{required:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.candidate.type=e),onInput:t[3]||(t[3]=(...t)=>e.resetTypeError&&e.resetTypeError(...t))},z,544),[[H.bM,n.candidate.type]])]),A],32)])}var T=a(9117),N={data(){return{nameError:"",typeError:""}},validations:{candidate:{name:{required:T.C1,minLength:(0,T.Ei)(3),maxLength:(0,T.BS)(30)},type:{required:T.C1}}},methods:{checkFormData(){return!this.v$.candidate.name.$dirty&&this.v$.candidate.name.required.$invalid?this.nameError="нет значения":!this.v$.candidate.name.$dirty&&this.v$.candidate.name.minLength.$invalid?this.nameError="минимум 3 символа":!this.v$.candidate.name.$dirty&&this.v$.candidate.name.maxLength.$invalid?this.nameError="максимум 30 символа":this.nameError="",!this.v$.candidate.type.$dirty&&this.v$.candidate.type.required.$invalid?this.typeError="нет значения":this.typeError="",!this.nameError&&!this.typeError},resetNameError(){this.nameError=""},resetTypeError(){this.typeError=""},resetForm(){this.candidate.name="",this.candidate.type=""}}},V=a(3053),U={name:"CategoryEditForm",mixins:[N],setup(){return{v$:(0,V.ZP)()}},props:{category:{type:Object,required:!0}},data(){return{candidate:{id:0,name:"",type:""}}},methods:{...(0,g.nv)(["putCategoryById"]),async formHandler(){if(!this.checkFormData())return;const e={id:this.candidate.id,category:{name:this.candidate.name,type:this.candidate.type}};await this.putCategoryById(e),this.$emit("hideForm",!0)}},watch:{category(){this.candidate={...this.category}}},mounted(){this.candidate={...this.category}}};const j=(0,b.Z)(U,[["render",S]]);var O=j,R={name:"CategoryList",components:{CategoryListItem:$,CategoryEditForm:O},mixins:[v.Z],data(){return{target:{},activeConfirmForm:!1,activeEditForm:!1}},computed:{...(0,g.Se)(["getAllCategories"]),isEmptyList(){return 0===this.getAllCategories.length}},methods:{...(0,g.nv)(["getCategoriesData","removeCategoryById"]),async updateList(e){this.page=e,await this.setupPagination(this.getAllCategories)},async deleteCategory(e){if(e&&this.target.id)try{await this.removeCategoryById(this.target.id)}catch(t){}finally{this.activeConfirmForm=!1,this.target={}}},editHandler(e){this.target=e,this.activeEditForm=!0},deleteHandler(e){this.target=e,this.activeConfirmForm=!0},hideEditForm(e){e&&(this.target={},this.activeEditForm=!1)}},watch:{getAllCategories(){this.setupPagination(this.getAllCategories)}},async mounted(){await this.setupPagination(this.getAllCategories)}};const K=(0,b.Z)(R,[["render",y]]);var Y=K;const G={class:"create-form"},J=(0,r._)("div",{class:"title"},"Добавить Категорию",-1),Q={class:"row"},X={class:"label"},ee=(0,r._)("label",null,"Название",-1),te={class:"error"},ae={class:"row"},re={class:"label"},ie=(0,r._)("label",null,"Тип",-1),ne={class:"error"},oe=(0,r._)("option",{selected:"",value:"Доход"},"Доход",-1),de=(0,r._)("option",{value:"Расход"},"Расход",-1),se=[oe,de],le=(0,r._)("button",{type:"submit",class:"row btn"}," ДОБАВИТЬ ",-1);function ce(e,t,a,i,n,o){return(0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,H.iM)(((...e)=>o.formHandler&&o.formHandler(...e)),["prevent"]))},[J,(0,r._)("div",Q,[(0,r._)("div",X,[ee,(0,r._)("span",te,(0,_.zw)(e.nameError),1)]),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.candidate.name=e),onInput:t[1]||(t[1]=(...t)=>e.resetNameError&&e.resetNameError(...t))},null,544),[[H.nr,n.candidate.name,void 0,{trim:!0}]])]),(0,r._)("div",ae,[(0,r._)("div",re,[ie,(0,r._)("span",ne,(0,_.zw)(e.typeError),1)]),(0,r.wy)((0,r._)("select",{class:"category-form__type form-row","onUpdate:modelValue":t[2]||(t[2]=e=>n.candidate.type=e),onInput:t[3]||(t[3]=(...t)=>e.resetTypeError&&e.resetTypeError(...t))},se,544),[[H.bM,n.candidate.type,void 0,{trim:!0}]])]),le],32)])}var me={name:"CreateCategoryForm",mixins:[N],setup(){return{v$:(0,V.ZP)()}},data(){return{candidate:{name:"",type:""}}},methods:{...(0,g.nv)(["addCategory"]),async formHandler(){this.checkFormData()&&(await this.addCategory(this.candidate),this.$emit("hideForm",!0))}}};const ue=(0,b.Z)(me,[["render",ce]]);var pe=ue,he={components:{CategoryCreateForm:pe,CategoryList:Y},name:"CategoryView",data(){return{activeCreateModal:!1}},methods:{showCreateModal(){this.activeCreateModal=!0},hideCreateModal(e){e&&(this.activeCreateModal=!1)}}};const ye=(0,b.Z)(he,[["render",l]]);var ge=ye}}]);
//# sourceMappingURL=792.cc91f358.js.map