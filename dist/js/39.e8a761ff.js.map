{"version":3,"file":"js/39.e8a761ff.js","mappings":"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","sources":["webpack://budget/./src/views/StatisticsView.vue","webpack://budget/./src/components/balance/MainCurrencyHandler.vue","webpack://budget/./src/components/balance/MainCurrencyHandler.vue?1855","webpack://budget/./src/views/StatisticsView.vue?b643"],"sourcesContent":["<template>\n  <div class=\"handler statistic\">\n    <div class=\"handler__header\">\n      <div class=\"title\">Баланс по Счетам</div>\n    </div>\n    <div class=\"handler__content\">\n      <div class=\"list-header\">\n      <table v-if=\"!isEmptyList\">\n        <thead>\n        <tr>\n         <th>№</th>\n         <th>Название</th>\n         <th>Валюта</th>\n         <th>Нач. баланс</th>\n         <th>Доход</th>\n         <th>Расход</th>\n         <th>Сумма</th>\n         <th>Сумма в {{mainCurrencySymbol}}</th>\n       </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item of statisticList\" :key=\"item.id\">\n          <td>{{item.id}}</td>\n          <td>{{item.name}}</td>\n          <td>{{item.currency}}</td>\n          <td>{{item.startBalance}}</td>\n          <td>{{item.income}}</td>\n          <td>{{item.outcome}}</td>\n          <td>{{item.total}}</td>\n          <td>{{item.inUsd}}</td>\n        </tr>\n      </tbody>\n    </table>\n     <div v-else class=\"empty-list\">Данных пока нет</div>\n    </div>\n    <main-currency-handler @changeCurrency=\"changeMainCurrency\"/>\n    <div class=\"main\">\n\n    </div>\n\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport {mapGetters, mapActions} from \"vuex\"\nimport MainCurrencyHandler from '@/components/balance/MainCurrencyHandler.vue';\nexport default {\n  components: { MainCurrencyHandler },\n  name: 'StatisticsView',\n  computed: {\n    ...mapGetters(['getAllRecords', 'getAllBills', 'getAllCurrencies', 'getCurrencyBySymbol']),\n    statisticList() {\n      const bills = this.getAllBills;\n      const returnedList = [];\n      bills.forEach(bill => returnedList.push(this.countOneBill(bill)));\n      return returnedList;\n    },\n    isEmptyList() {\n      if (this.statisticList.length === 0) return true;\n      else return false;\n    },\n    selectedCurrencyPrice() {\n      if (this.mainCurrencySymbol == 'USD') return 1;\n      else {\n        const currency = this.getCurrencyBySymbol(this.mainCurrencySymbol);\n        if (currency.price) return currency.price\n        else return 1\n      }\n    }\n  },\n  data() {\n    return {\n      mainCurrencySymbol: 'USD'\n    }\n  },\n  methods: {\n    ...mapActions(['getBillsData', 'getRecordsData', 'getCurrencyData', 'toggleLoader']),\n    countOneBill(bill) {\n      const statCandidat = {\n        id: bill.id,\n        name: bill.name,\n        currency: bill.currency,\n        startBalance: bill.startBalance,\n        income: 0,\n        outcome: 0,\n        total: 0,\n        inUsd: 0\n      }\n      const records = this.getAllRecords;\n      records.forEach(elem => {\n        if (elem.bill == statCandidat.name) {\n              if (elem.type == 'Доход') statCandidat.income += +elem.sum;\n              else statCandidat.outcome += +elem.sum;\n            }\n      });\n      statCandidat.total = +(statCandidat.startBalance) + statCandidat.income - statCandidat.outcome;\n      statCandidat.inUsd = this.countInSelectedCurrency(statCandidat.currency, statCandidat.total, this.selectedCurrencyPrice)\n      return statCandidat;\n    },\n    countInSelectedCurrency(symbol, sum = 0, secondRate = 1) {\n      const currencies = this.getAllCurrencies;\n      const result = currencies.filter(elem => elem.symbol == symbol);\n      if (result.length > 0) {\n        const price = result[0].price;\n        return ((sum / price) * secondRate).toFixed(2);\n      } else return 0\n    },\n    changeMainCurrency(symbol) {\n      this.mainCurrencySymbol = symbol;\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>","<template>\n  <div>\n    <div class=\"main-currency\">\n      <div class=\"main-currency__title\">В качестве основной валюты выбран {{mainCurrency.symbol}}</div>\n      <div class=\"main-currency__btn\" @click=\"formActive = !formActive\">\n        <span>{{buttonText}}</span>\n        <img\n          :class=\"{active: formActive}\"\n          src=\"@/assets/images/triangle.svg\"\n          alt=\"\">\n      </div>\n    </div>\n    <form @submit.prevent=\"formHandler\" v-bind:class=\"{done: !formActive}\">\n      <div class=\"row\">\n        <div class=\"label\">\n          <label>Выберете валюту</label>\n          <span class=\"error show\"></span>\n        </div>\n        <select v-model=\"selectedOption\">\n          <option\n            v-for=\"item of getAllCurrencies\"\n            :key=\"item.id\"\n            :value=\"item\">\n            {{item.title}}\n          </option>\n        </select>\n      </div>\n      <button type=\"submit\" class=\"row btn\">\n        ПОДТВЕРДИТЬ\n      </button>\n\n    </form>\n  </div>\n</template>\n<script>\nimport {mapActions, mapGetters} from 'vuex'\nexport default {\n  name: 'MainCurrencyHandler',\n  computed: {\n    ...mapGetters(['getAllCurrencies']),\n    buttonText() {\n      if (this.formActive) return 'Скрыть'\n      else return 'Изменить'\n    }\n  },\n  data() {\n    return {\n      mainCurrency: {\n        symbol: 'USD'\n      },\n      selectedOption: {},\n      formActive: false\n    }\n  },\n  methods: {\n    ...mapActions(['putCurrencyById']),\n    formHandler() {\n      this.mainCurrency = this.selectedOption;\n      this.$emit('changeCurrency', this.mainCurrency.symbol);\n      this.formActive = false;\n    }\n  },\n}\n</script>\n<style lang=\"scss\" scoped>\n  .main-currency {\n    margin-top: 20px;\n    &__title {\n      font-weight: 700;\n      line-height: 30px;\n    }\n    &__btn {\n      display: flex;\n      margin-top: 10px;\n      line-height: 20px;\n      font-size: 14px;\n      font-weight: 700;\n      color: #fff;\n      background: #1e5f7e;\n      padding: 8px 15px 8px 20px;\n      max-width: 140px;\n      margin-bottom: 15px;\n      display: flex;\n      justify-content: space-between;\n      cursor: pointer;\n      & span {\n        display: inline-block;\n      }\n      & img {\n        margin-left: 10px;\n      }\n    }\n\n  }\n  form.done {\n      display: none;\n  }\n  .main-currency__btn img.active {\n    transform: rotate(90deg);\n  }\n</style>","import { render } from \"./MainCurrencyHandler.vue?vue&type=template&id=9779a950&scoped=true\"\nimport script from \"./MainCurrencyHandler.vue?vue&type=script&lang=js\"\nexport * from \"./MainCurrencyHandler.vue?vue&type=script&lang=js\"\n\nimport \"./MainCurrencyHandler.vue?vue&type=style&index=0&id=9779a950&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/dmitriy/Work/Vue/Vue2/budget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9779a950\"]])\n\nexport default __exports__","import { render } from \"./StatisticsView.vue?vue&type=template&id=585b0214\"\nimport script from \"./StatisticsView.vue?vue&type=script&lang=js\"\nexport * from \"./StatisticsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/dmitriy/Work/Vue/Vue2/budget/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","$options","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_toDisplayString","$data","_Fragment","_renderList","item","key","id","name","currency","startBalance","income","outcome","total","inUsd","_createVNode","_component_main_currency_handler","onChangeCurrency","_hoisted_14","type","symbol","onClick","active","src","_imports_0","alt","onSubmit","done","_hoisted_4","$event","_ctx","value","title","computed","mapGetters","buttonText","this","formActive","data","mainCurrency","selectedOption","methods","mapActions","formHandler","$emit","__exports__","components","MainCurrencyHandler","statisticList","bills","getAllBills","returnedList","forEach","bill","push","countOneBill","isEmptyList","length","selectedCurrencyPrice","mainCurrencySymbol","getCurrencyBySymbol","price","statCandidat","records","getAllRecords","elem","sum","countInSelectedCurrency","secondRate","currencies","getAllCurrencies","result","filter","toFixed","changeMainCurrency","render"],"sourceRoot":""}